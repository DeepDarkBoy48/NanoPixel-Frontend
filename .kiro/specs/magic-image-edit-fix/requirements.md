# 需求文档

## 介绍

魔法修图功能目前在前端实现和后端API期望之间存在不匹配。后端API需要 `originFile` 和 `file` 两个参数，但前端只发送了一个文件。本规格文档旨在修复图片上传工作流程，以正确处理原始图片并确保API通信成功。

## 需求

### 需求 1

**用户故事：** 作为用户，我希望上传图片进行AI编辑，以便系统能够正确处理原始文件和任何预处理版本。

#### 验收标准

1. 当用户选择图片文件时，系统应存储原始文件用于API提交
2. 当表单提交时，系统应向后端API发送 `originFile` 和 `file` 两个参数
3. 如果后端期望重复文件，系统应将同一文件作为两个参数发送
4. 当进行API调用时，系统应使用正确的参数名称（`originFile` 和 `file`）

### 需求 2

**用户故事：** 作为用户，我希望图片上传过程能够无缝工作，以便我能够成功生成编辑后的图片而不出现错误。

#### 验收标准

1. 当API调用成功时，系统应在结果预览中显示编辑后的图片
2. 当API调用失败时，系统应向用户显示适当的错误消息
3. 当提交表单时，系统应验证所需的文件是否存在
4. 当上传进行中时，系统应显示加载状态并禁用提交按钮

### 需求 3

**用户故事：** 作为开发者，我希望前端代码与后端API契约匹配，以便集成能够正确工作。

#### 验收标准

1. 当构建FormData时，系统应包含 `originFile` 和 `file` 两个字段
2. 当调用imageEditService时，系统应传递正确格式的FormData
3. 当后端API签名更改时，前端应易于适配
4. 当调试API问题时，系统应提供清晰的错误处理和日志记录