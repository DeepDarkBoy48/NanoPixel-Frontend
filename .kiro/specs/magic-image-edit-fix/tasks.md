# 实现计划

- [ ] 1. 更新onSubmit方法中的FormData构造
  - 修改 `src/views/ai/magicImageEdit.vue` 中的 `onSubmit` 函数，包含 `originFile` 和 `file` 两个参数
  - 确保两个参数都使用相同的 `selectedFile.value`，符合后端API契约规定
  - 维护现有的提示词参数处理
  - _需求: 1.1, 1.2, 1.4, 3.1_

- [ ] 2. 增强API调用的错误处理
  - 为不同的HTTP状态码（400、413、500等）添加特定的错误处理
  - 使用ElMessage实现用户友好的错误消息
  - 添加控制台日志记录以调试API问题
  - _需求: 2.2, 3.4_

- [ ] 3. 为必需的FormData字段添加验证
  - 实现验证以确保在API提交前文件和提示词都存在
  - 如需要，更新 `canSubmit` 计算属性以反映新的验证要求
  - 添加客户端验证反馈以防止不必要的API调用
  - _需求: 2.3, 1.3_

- [ ] 4. 测试完整的图片上传和编辑工作流程
  - 为成功的图片编辑工作流程创建测试场景
  - 测试错误场景（缺少文件、缺少提示词、API错误）
  - 验证成功API响应后结果图片正确显示
  - 测试文件大小限制和适当的错误处理
  - _需求: 2.1, 2.2, 2.3, 2.4_